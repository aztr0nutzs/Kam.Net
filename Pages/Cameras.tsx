<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE abiword PUBLIC "-//ABISOURCE//DTD AWML 1.0 Strict//EN" "http://www.abisource.com/awml.dtd">
<abiword template="false" xmlns:ct="http://www.abisource.com/changetracking.dtd" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:math="http://www.w3.org/1998/Math/MathML" xid-max="279" xmlns:dc="http://purl.org/dc/elements/1.1/" fileformat="1.1" xmlns:svg="http://www.w3.org/2000/svg" xmlns:awml="http://www.abisource.com/awml.dtd" xmlns="http://www.abisource.com/awml.dtd" xmlns:xlink="http://www.w3.org/1999/xlink" version="3.0.7" xml:space="preserve" props="dom-dir:ltr; document-footnote-restart-section:0; document-endnote-type:numeric; document-endnote-place-enddoc:1; document-endnote-initial:1; lang:en-US; document-endnote-restart-section:0; document-footnote-restart-page:0; document-footnote-type:numeric; document-footnote-initial:1; document-endnote-place-endsection:0">
<!-- ======================================================================== -->
<!-- This file is an AbiWord document.                                        -->
<!-- AbiWord is a free, Open Source word processor.                           -->
<!-- More information about AbiWord is available at http://www.abisource.com/ -->
<!-- You should not edit this file by hand.                                   -->
<!-- ======================================================================== -->

<metadata>
<m key="abiword.date_last_changed">Sat Nov  1 05:33:36 2025
</m>
<m key="abiword.generator">AbiWord</m>
<m key="dc.date">Sat Nov  1 05:33:36 2025
</m>
<m key="dc.format">application/x-abiword</m>
</metadata>
<rdf>
</rdf>
<history version="1" edit-time="113" last-saved="1761989616" uid="93cbfe98-b705-11f0-91e7-b849cc1a44ac">
<version id="1" started="1761989616" uid="d753733a-b705-11f0-91e7-b849cc1a44ac" auto="0" top-xid="279"/>
</history>
<styles>
<s type="P" name="Normal" basedon="" followedby="Current Settings" props="font-family:Liberation Serif; margin-top:0pt; font-variant:normal; margin-left:0pt; text-indent:0in; widows:2; font-style:normal; font-weight:normal; text-decoration:none; color:000000; line-height:1.0; text-align:left; margin-bottom:0pt; text-position:normal; margin-right:0pt; bgcolor:transparent; font-size:12pt; font-stretch:normal"/>
</styles>
<pagesize pagetype="A4" orientation="portrait" width="210.000000" height="297.000000" units="mm" page-scale="1.000000"/>
<section xid="278">
<p style="Normal" xid="279"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">React</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, { useState, useEffect } </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"react"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="1"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> { base44 } </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"@/api/base44Client"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="2"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> { useQuery, useMutation, useQueryClient } </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"@tanstack/react-query"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="3"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraGrid</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"../components/security/CameraGrid"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="4"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">LiveView</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"../components/security/LiveView"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="5"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">RecordingsPanel</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"../components/security/RecordingsPanel"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="6"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">EventsTimeline</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"../components/security/EventsTimeline"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="7"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraControls</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"../components/security/CameraControls"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="8"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">SecurityHeader</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"../components/security/SecurityHeader"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="9"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">AddCameraDialog</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"../components/security/AddCameraDialog"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="10"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">AnalyticsDashboard</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"../components/security/AnalyticsDashboard"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="11"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">import</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">ConsentDialog</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">from</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"../components/common/ConsentDialog"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="12"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">export</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">default</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">function</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">SecurityCameras</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">() {</c></p>
<p style="Normal" xid="13"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> [selectedCamera, setSelectedCamera] = useState(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">null</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="14"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> [viewMode, setViewMode] = useState(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'grid'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="15"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> [showAddCamera, setShowAddCamera] = useState(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">false</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="16"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> [showConsentDialog, setShowConsentDialog] = useState(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">false</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="17"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> [consentGranted, setConsentGranted] = useState(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">false</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="18"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> queryClient = useQueryClient();</c></p>
<p style="Normal" xid="19"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Check for camera consent</c></p>
<p style="Normal" xid="20"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">useEffect(() =&gt; {</c></p>
<p style="Normal" xid="21"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">checkConsent();</c></p>
<p style="Normal" xid="22"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}, []);</c></p>
<p style="Normal" xid="23"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> checkConsent = </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">async</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> () =&gt; {</c></p>
<p style="Normal" xid="24"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">try</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> {</c></p>
<p style="Normal" xid="25"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> user = </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">await</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> base44.auth.me();</c></p>
<p style="Normal" xid="26"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> consent = user.camera_stream_consent;</c></p>
<p style="Normal" xid="27"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setConsentGranted(consent === </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">true</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="28"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">} </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">catch</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (error) {</c></p>
<p style="Normal" xid="29"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">console.error(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'Failed to check consent:'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, error);</c></p>
<p style="Normal" xid="30"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="31"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">};</c></p>
<p style="Normal" xid="32"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Fetch cameras</c></p>
<p style="Normal" xid="33"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> { data: cameras = [], isLoading: camerasLoading } = useQuery({</c></p>
<p style="Normal" xid="34"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryKey: [</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'cameras'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">],</c></p>
<p style="Normal" xid="35"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryFn: () =&gt; base44.entities.</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Camera</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.list(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'-last_online'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, </c><c props="font-weight:normal; color:098658; font-family:Droid Sans Mono; font-size:14.000000pt">100</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">),</c></p>
<p style="Normal" xid="36"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">refetchInterval: </c><c props="font-weight:normal; color:098658; font-family:Droid Sans Mono; font-size:14.000000pt">5000</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="37"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="38"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Fetch events</c></p>
<p style="Normal" xid="39"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> { data: events = [] } = useQuery({</c></p>
<p style="Normal" xid="40"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryKey: [</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'camera-events'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">],</c></p>
<p style="Normal" xid="41"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryFn: () =&gt; base44.entities.</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraEvent</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.list(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'-timestamp'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, </c><c props="font-weight:normal; color:098658; font-family:Droid Sans Mono; font-size:14.000000pt">50</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">),</c></p>
<p style="Normal" xid="42"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">refetchInterval: </c><c props="font-weight:normal; color:098658; font-family:Droid Sans Mono; font-size:14.000000pt">3000</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="43"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="44"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Fetch recordings</c></p>
<p style="Normal" xid="45"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> { data: recordings = [] } = useQuery({</c></p>
<p style="Normal" xid="46"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryKey: [</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'recordings'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">],</c></p>
<p style="Normal" xid="47"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryFn: () =&gt; base44.entities.</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraRecording</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.list(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'-start_time'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, </c><c props="font-weight:normal; color:098658; font-family:Droid Sans Mono; font-size:14.000000pt">100</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">),</c></p>
<p style="Normal" xid="48"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="49"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Create camera mutation</c></p>
<p style="Normal" xid="50"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> createCameraMutation = useMutation({</c></p>
<p style="Normal" xid="51"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">mutationFn: (cameraData) =&gt; base44.entities.</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Camera</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.create(cameraData),</c></p>
<p style="Normal" xid="52"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onSuccess: () =&gt; {</c></p>
<p style="Normal" xid="53"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryClient.invalidateQueries({ queryKey: [</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'cameras'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">] });</c></p>
<p style="Normal" xid="54"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setShowAddCamera(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">false</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="55"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">},</c></p>
<p style="Normal" xid="56"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="57"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Update camera mutation</c></p>
<p style="Normal" xid="58"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> updateCameraMutation = useMutation({</c></p>
<p style="Normal" xid="59"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">mutationFn: ({ id, data }) =&gt; base44.entities.</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Camera</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.update(id, data),</c></p>
<p style="Normal" xid="60"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onSuccess: () =&gt; {</c></p>
<p style="Normal" xid="61"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryClient.invalidateQueries({ queryKey: [</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'cameras'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">] });</c></p>
<p style="Normal" xid="62"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">},</c></p>
<p style="Normal" xid="63"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="64"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Create event mutation</c></p>
<p style="Normal" xid="65"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> createEventMutation = useMutation({</c></p>
<p style="Normal" xid="66"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">mutationFn: (eventData) =&gt; base44.entities.</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraEvent</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.create(eventData),</c></p>
<p style="Normal" xid="67"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onSuccess: () =&gt; {</c></p>
<p style="Normal" xid="68"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryClient.invalidateQueries({ queryKey: [</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'camera-events'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">] });</c></p>
<p style="Normal" xid="69"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">},</c></p>
<p style="Normal" xid="70"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="71"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Create recording mutation</c></p>
<p style="Normal" xid="72"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> createRecordingMutation = useMutation({</c></p>
<p style="Normal" xid="73"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">mutationFn: (recordingData) =&gt; base44.entities.</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraRecording</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.create(recordingData),</c></p>
<p style="Normal" xid="74"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onSuccess: () =&gt; {</c></p>
<p style="Normal" xid="75"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">queryClient.invalidateQueries({ queryKey: [</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'recordings'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">] });</c></p>
<p style="Normal" xid="76"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">},</c></p>
<p style="Normal" xid="77"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="78"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> handleSelectCamera = (camera) =&gt; {</c></p>
<p style="Normal" xid="79"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Check consent before viewing camera</c></p>
<p style="Normal" xid="80"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">if</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (!consentGranted) {</c></p>
<p style="Normal" xid="81"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setSelectedCamera(camera);</c></p>
<p style="Normal" xid="82"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setShowConsentDialog(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">true</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="83"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">return</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">;</c></p>
<p style="Normal" xid="84"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="85"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setSelectedCamera(camera);</c></p>
<p style="Normal" xid="86"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setViewMode(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'live'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="87"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">};</c></p>
<p style="Normal" xid="88"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> handleConsentGranted = </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">async</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> () =&gt; {</c></p>
<p style="Normal" xid="89"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">try</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> {</c></p>
<p style="Normal" xid="90"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">await</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> base44.auth.updateMe({</c></p>
<p style="Normal" xid="91"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">camera_stream_consent: </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">true</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="92"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">camera_stream_consent_date: </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">new</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Date</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">().toISOString()</c></p>
<p style="Normal" xid="93"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="94"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setConsentGranted(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">true</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="95"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setShowConsentDialog(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">false</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="96"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">if</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (selectedCamera) {</c></p>
<p style="Normal" xid="97"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setViewMode(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'live'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="98"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="99"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">} </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">catch</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (error) {</c></p>
<p style="Normal" xid="100"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">console.error(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'Failed to save consent:'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, error);</c></p>
<p style="Normal" xid="101"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="102"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">};</c></p>
<p style="Normal" xid="103"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> handleAddCamera = </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">async</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (cameraData) =&gt; {</c></p>
<p style="Normal" xid="104"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">try</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> {</c></p>
<p style="Normal" xid="105"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">await</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> createCameraMutation.mutateAsync({</c></p>
<p style="Normal" xid="106"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">...cameraData,</c></p>
<p style="Normal" xid="107"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">status: </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'offline'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="108"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">last_online: </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">new</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Date</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">().toISOString(),</c></p>
<p style="Normal" xid="109"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="110"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">} </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">catch</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (error) {</c></p>
<p style="Normal" xid="111"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">console.error(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'Failed to add camera:'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, error);</c></p>
<p style="Normal" xid="112"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="113"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">};</c></p>
<p style="Normal" xid="114"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> handleStartRecording = </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">async</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (cameraId) =&gt; {</c></p>
<p style="Normal" xid="115"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">try</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> {</c></p>
<p style="Normal" xid="116"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> camera = cameras.find(c =&gt; c.id === cameraId);</c></p>
<p style="Normal" xid="117"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"></c></p>
<p style="Normal" xid="118"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">await</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> createRecordingMutation.mutateAsync({</c></p>
<p style="Normal" xid="119"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">camera_id: cameraId,</c></p>
<p style="Normal" xid="120"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">camera_name: camera.name,</c></p>
<p style="Normal" xid="121"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">start_time: </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">new</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Date</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">().toISOString(),</c></p>
<p style="Normal" xid="122"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">recording_type: </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'manual'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="123"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">resolution: camera.resolution || </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'1080p'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="124"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="125"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">await</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> updateCameraMutation.mutateAsync({</c></p>
<p style="Normal" xid="126"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">id: cameraId,</c></p>
<p style="Normal" xid="127"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">data: { is_recording: </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">true</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, status: </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'recording'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> }</c></p>
<p style="Normal" xid="128"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="129"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">} </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">catch</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (error) {</c></p>
<p style="Normal" xid="130"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">console.error(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'Failed to start recording:'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, error);</c></p>
<p style="Normal" xid="131"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="132"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">};</c></p>
<p style="Normal" xid="133"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> handleStopRecording = </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">async</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (cameraId) =&gt; {</c></p>
<p style="Normal" xid="134"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">try</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> {</c></p>
<p style="Normal" xid="135"><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">// Find active recording</c></p>
<p style="Normal" xid="136"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> activeRecording = recordings.find(</c></p>
<p style="Normal" xid="137"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">r =&gt; r.camera_id === cameraId &amp;&amp; !r.end_time</c></p>
<p style="Normal" xid="138"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="139"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">if</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (activeRecording) {</c></p>
<p style="Normal" xid="140"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> endTime = </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">new</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Date</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">();</c></p>
<p style="Normal" xid="141"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> startTime = </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">new</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Date</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">(activeRecording.start_time);</c></p>
<p style="Normal" xid="142"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> duration = </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Math</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.floor((endTime - startTime) / </c><c props="font-weight:normal; color:098658; font-family:Droid Sans Mono; font-size:14.000000pt">1000</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="143"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">await</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> base44.entities.</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraRecording</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.update(activeRecording.id, {</c></p>
<p style="Normal" xid="144"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">end_time: endTime.toISOString(),</c></p>
<p style="Normal" xid="145"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">duration_seconds: duration,</c></p>
<p style="Normal" xid="146"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="147"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="148"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">await</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> updateCameraMutation.mutateAsync({</c></p>
<p style="Normal" xid="149"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">id: cameraId,</c></p>
<p style="Normal" xid="150"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">data: { is_recording: </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">false</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, status: </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'online'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> }</c></p>
<p style="Normal" xid="151"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="152"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">} </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">catch</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (error) {</c></p>
<p style="Normal" xid="153"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">console.error(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'Failed to stop recording:'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, error);</c></p>
<p style="Normal" xid="154"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="155"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">};</c></p>
<p style="Normal" xid="156"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> handleMotionDetected = </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">async</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (cameraId) =&gt; {</c></p>
<p style="Normal" xid="157"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">try</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> {</c></p>
<p style="Normal" xid="158"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> camera = cameras.find(c =&gt; c.id === cameraId);</c></p>
<p style="Normal" xid="159"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"></c></p>
<p style="Normal" xid="160"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">await</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> createEventMutation.mutateAsync({</c></p>
<p style="Normal" xid="161"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">camera_id: cameraId,</c></p>
<p style="Normal" xid="162"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">camera_name: camera.name,</c></p>
<p style="Normal" xid="163"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">event_type: </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'motion'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="164"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">timestamp: </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">new</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Date</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">().toISOString(),</c></p>
<p style="Normal" xid="165"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">confidence: </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Math</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.floor(</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">Math</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.random() * </c><c props="font-weight:normal; color:098658; font-family:Droid Sans Mono; font-size:14.000000pt">30</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">) + </c><c props="font-weight:normal; color:098658; font-family:Droid Sans Mono; font-size:14.000000pt">70</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="166"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">severity: </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'medium'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="167"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">acknowledged: </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">false</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">,</c></p>
<p style="Normal" xid="168"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">});</c></p>
<p style="Normal" xid="169"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">} </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">catch</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (error) {</c></p>
<p style="Normal" xid="170"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">console.error(</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'Failed to create event:'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">, error);</c></p>
<p style="Normal" xid="171"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="172"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">};</c></p>
<p style="Normal" xid="173"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">const</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> stats = {</c></p>
<p style="Normal" xid="174"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">total: cameras.length,</c></p>
<p style="Normal" xid="175"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">online: cameras.filter(c =&gt; c.status === </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'online'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> || c.status === </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'recording'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">).length,</c></p>
<p style="Normal" xid="176"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">recording: cameras.filter(c =&gt; c.is_recording).length,</c></p>
<p style="Normal" xid="177"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">alerts: events.filter(e =&gt; !e.acknowledged &amp;&amp; (e.severity === </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'high'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> || e.severity === </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'critical'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)).length,</c></p>
<p style="Normal" xid="178"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">};</c></p>
<p style="Normal" xid="179"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">if</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (camerasLoading &amp;&amp; cameras.length === </c><c props="font-weight:normal; color:098658; font-family:Droid Sans Mono; font-size:14.000000pt">0</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">) {</c></p>
<p style="Normal" xid="180"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">return</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (</c></p>
<p style="Normal" xid="181"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;div className=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"min-h-screen flex items-center justify-center"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&gt;</c></p>
<p style="Normal" xid="182"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;div className=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"text-center"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&gt;</c></p>
<p style="Normal" xid="183"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;div className=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"w-16 h-16 border-4 border-cyan-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> /&gt;</c></p>
<p style="Normal" xid="184"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;p className=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"text-cyan-400 font-mono"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&gt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">INITIALIZING</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CAMERA</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">SYSTEM</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">...&lt;/p&gt;</c></p>
<p style="Normal" xid="185"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;/div&gt;</c></p>
<p style="Normal" xid="186"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;/div&gt;</c></p>
<p style="Normal" xid="187"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="188"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="189"><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">return</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> (</c></p>
<p style="Normal" xid="190"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;div className=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"min-h-screen p-4 md:p-6"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&gt;</c></p>
<p style="Normal" xid="191"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">SecurityHeader</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c></p>
<p style="Normal" xid="192"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">stats={stats}</c></p>
<p style="Normal" xid="193"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onAddCamera={() =&gt; setShowAddCamera(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">true</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)}</c></p>
<p style="Normal" xid="194"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">viewMode={viewMode}</c></p>
<p style="Normal" xid="195"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onViewModeChange={setViewMode}</c></p>
<p style="Normal" xid="196"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">/&gt;</c></p>
<p style="Normal" xid="197"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;div className=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"mt-6 space-y-6"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&gt;</c></p>
<p style="Normal" xid="198"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">{viewMode === </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'grid'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> &amp;&amp; (</c></p>
<p style="Normal" xid="199"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraGrid</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c></p>
<p style="Normal" xid="200"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">cameras={cameras}</c></p>
<p style="Normal" xid="201"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onSelectCamera={handleSelectCamera}</c></p>
<p style="Normal" xid="202"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onUpdateCamera={(id, data) =&gt; updateCameraMutation.mutate({ id, data })}</c></p>
<p style="Normal" xid="203"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onStartRecording={handleStartRecording}</c></p>
<p style="Normal" xid="204"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onStopRecording={handleStopRecording}</c></p>
<p style="Normal" xid="205"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">/&gt;</c></p>
<p style="Normal" xid="206"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)}</c></p>
<p style="Normal" xid="207"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">{viewMode === </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'live'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> &amp;&amp; selectedCamera &amp;&amp; (</c></p>
<p style="Normal" xid="208"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;div className=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"grid grid-cols-1 lg:grid-cols-3 gap-6"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&gt;</c></p>
<p style="Normal" xid="209"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;div className=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"lg:col-span-2"</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&gt;</c></p>
<p style="Normal" xid="210"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">LiveView</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c></p>
<p style="Normal" xid="211"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">camera={selectedCamera}</c></p>
<p style="Normal" xid="212"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onUpdateCamera={(data) =&gt; updateCameraMutation.mutate({ </c></p>
<p style="Normal" xid="213"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">id: selectedCamera.id, </c></p>
<p style="Normal" xid="214"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">data </c></p>
<p style="Normal" xid="215"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">})}</c></p>
<p style="Normal" xid="216"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onStartRecording={() =&gt; handleStartRecording(selectedCamera.id)}</c></p>
<p style="Normal" xid="217"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onStopRecording={() =&gt; handleStopRecording(selectedCamera.id)}</c></p>
<p style="Normal" xid="218"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">/&gt;</c></p>
<p style="Normal" xid="219"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;/div&gt;</c></p>
<p style="Normal" xid="220"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;div&gt;</c></p>
<p style="Normal" xid="221"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraControls</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c></p>
<p style="Normal" xid="222"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">camera={selectedCamera}</c></p>
<p style="Normal" xid="223"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onUpdateCamera={(data) =&gt; updateCameraMutation.mutate({ </c></p>
<p style="Normal" xid="224"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">id: selectedCamera.id, </c></p>
<p style="Normal" xid="225"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">data </c></p>
<p style="Normal" xid="226"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">})}</c></p>
<p style="Normal" xid="227"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">/&gt;</c></p>
<p style="Normal" xid="228"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;/div&gt;</c></p>
<p style="Normal" xid="229"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;/div&gt;</c></p>
<p style="Normal" xid="230"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)}</c></p>
<p style="Normal" xid="231"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">{viewMode === </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'recordings'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> &amp;&amp; (</c></p>
<p style="Normal" xid="232"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">RecordingsPanel</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c></p>
<p style="Normal" xid="233"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">recordings={recordings}</c></p>
<p style="Normal" xid="234"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">cameras={cameras}</c></p>
<p style="Normal" xid="235"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">/&gt;</c></p>
<p style="Normal" xid="236"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)}</c></p>
<p style="Normal" xid="237"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">{viewMode === </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'events'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> &amp;&amp; (</c></p>
<p style="Normal" xid="238"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">EventsTimeline</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c></p>
<p style="Normal" xid="239"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">events={events}</c></p>
<p style="Normal" xid="240"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">cameras={cameras}</c></p>
<p style="Normal" xid="241"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onAcknowledge={(eventId) =&gt; </c></p>
<p style="Normal" xid="242"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">base44.entities.</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">CameraEvent</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">.update(eventId, { acknowledged: </c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">true</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> })</c></p>
<p style="Normal" xid="243"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="244"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">/&gt;</c></p>
<p style="Normal" xid="245"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)}</c></p>
<p style="Normal" xid="246"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">{viewMode === </c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">'analytics'</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> &amp;&amp; (</c></p>
<p style="Normal" xid="247"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">AnalyticsDashboard</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c></p>
<p style="Normal" xid="248"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">cameras={cameras}</c></p>
<p style="Normal" xid="249"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">events={events}</c></p>
<p style="Normal" xid="250"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">recordings={recordings}</c></p>
<p style="Normal" xid="251"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">/&gt;</c></p>
<p style="Normal" xid="252"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)}</c></p>
<p style="Normal" xid="253"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;/div&gt;</c></p>
<p style="Normal" xid="254"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">{</c><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">/* Add Camera Dialog */</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="255"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">{showAddCamera &amp;&amp; (</c></p>
<p style="Normal" xid="256"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">AddCameraDialog</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"> </c></p>
<p style="Normal" xid="257"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onClose={() =&gt; setShowAddCamera(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">false</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)}</c></p>
<p style="Normal" xid="258"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onAdd={handleAddCamera}</c></p>
<p style="Normal" xid="259"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">/&gt;</c></p>
<p style="Normal" xid="260"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)}</c></p>
<p style="Normal" xid="261"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">{</c><c props="font-weight:normal; color:008000; font-family:Droid Sans Mono; font-size:14.000000pt">/* Consent Dialog */</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="262"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">{showConsentDialog &amp;&amp; (</c></p>
<p style="Normal" xid="263"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;</c><c props="font-weight:normal; color:008080; font-family:Droid Sans Mono; font-size:14.000000pt">ConsentDialog</c></p>
<p style="Normal" xid="264"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">title=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"Camera Stream Consent Required"</c></p>
<p style="Normal" xid="265"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">message=</c><c props="font-weight:normal; color:a31515; font-family:Droid Sans Mono; font-size:14.000000pt">"To view camera streams, we need your explicit consent. This will access live video feeds from your security cameras."</c></p>
<p style="Normal" xid="266"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onAccept={handleConsentGranted}</c></p>
<p style="Normal" xid="267"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">onDecline={() =&gt; {</c></p>
<p style="Normal" xid="268"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setShowConsentDialog(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">false</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="269"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">setSelectedCamera(</c><c props="font-weight:normal; color:0000ff; font-family:Droid Sans Mono; font-size:14.000000pt">null</c><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="270"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}}</c></p>
<p style="Normal" xid="271"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">/&gt;</c></p>
<p style="Normal" xid="272"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">)}</c></p>
<p style="Normal" xid="273"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">&lt;/div&gt;</c></p>
<p style="Normal" xid="274"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">);</c></p>
<p style="Normal" xid="275"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt">}</c></p>
<p style="Normal" xid="276"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"></c></p>
<p style="Normal" xid="277"><c props="font-weight:normal; color:000000; font-family:Droid Sans Mono; font-size:14.000000pt"></c></p>
</section>
</abiword>
